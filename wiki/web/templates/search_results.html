{% extends 'base.html' %}

{% block title %}Search Results{% endblock %}

{% block content %}

    <head>

    <title>Products</title>
    </head>

    <!-- Search for products based on whether they contain the user input><-->
    <form method="POST">
        <input name="search_input" placeholder="Search for products...">
        <input type="submit">
    </form>


<hr>
    <div id="table">
    {# determine whether each product contains the search input and display relevant products #}
    {% for product in all_products %}
        {% if search_input in product.title.upper() or search_input in product.description.upper() %}
            <table class = "table table-hover">
            <tr>
            <tr>
                <th>TITLE:</th>
                <td>
                   {{ product["title"] }}
                </td>
            </tr>
                <tr>
                <th>DESCRIPTION:</th>
                <td>

                    {{ product["description"]}}

                </td>
                </tr>
                <tr>
                 <th>PRICE:</th>
                <td>
                    {{ product["price"] }}
                    </td>
                </tr>
                <tr>
                <th>

                </th>
                <td>
            <!-- button to change bought status -->
                {% if product["bought"] == 0 %}
                    <button type="button" value="Purchase" onclick="buyItem({{ product }})">Buy Item</button>
                {% else %}
                    <p> This item has been bought </p>
                {% endif %}
                </td>
                </tr>

            </tr>
            </table>
            </div>
        {%  endif %}
    {% endfor %}


{% endblock %}